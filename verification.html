<!DOCTYPE html>

<!--
 // WEBSITE: https://themefisher.com
 // TWITTER: https://twitter.com/themefisher
 // FACEBOOK: https://www.facebook.com/themefisher
 // GITHUB: https://github.com/themefisher/
-->

<html lang="en">
<head>

  <!-- Basic Page Needs
	================================================== -->
  <meta charset="utf-8">
  <title>PAPSI - Verification</title>

  <!-- Mobile Specific Metas
	================================================== -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="Construction Html5 Template">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <meta name="author" content="Themefisher">
  <meta name="generator" content="Themefisher Educenter HTML Template v1.0">

  <!-- ** Plugins Needed for the Project ** -->
  <!-- Bootstrap -->
  <link rel="stylesheet" href="plugins/bootstrap/bootstrap.min.css">
  <!-- slick slider -->
  <link rel="stylesheet" href="plugins/slick/slick.css">
  <!-- themefy-icon -->
  <link rel="stylesheet" href="plugins/themify-icons/themify-icons.css">
  <!-- animation css -->
  <link rel="stylesheet" href="plugins/animate/animate.css">
  <!-- aos -->
  <link rel="stylesheet" href="plugins/aos/aos.css">
  <!-- venobox popup -->
  <link rel="stylesheet" href="plugins/venobox/venobox.css">

  <!-- Main Stylesheet -->
  <link href="css/style.css" rel="stylesheet">

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="images/favicon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="images/favicon.png">
  <link rel="shortcut icon" href="images/favicon.png">
  <meta name="theme-color" content="#166938">

  <style>
    /* Lightweight modal styles specific to verification to avoid Bootstrap conflicts */
    .hidden { display: none !important; }
    .verify-modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 2000; /* above header/navbar */
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1rem;
    }
    .verify-modal-content {
      background: #fff;
      border-radius: 12px;
      width: 100%;
      max-width: 640px;
      max-height: 90vh;
      overflow-y: auto;
      padding: 1.5rem;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    .verify-modal-close {
      background: transparent;
      border: 0;
      font-size: 1.5rem;
      line-height: 1;
      color: #6c757d;
      cursor: pointer;
    }
    /* Ensure result text matches label size */
    .verify-modal-content label,
    .verify-modal-content #verifyResult,
    .verify-modal-content #membershipVerifyResult { font-size: 1rem; }
  </style>

</head>

<body>
  <!-- preloader start -->
  <div class="preloader">
    <img src="images/preloader.gif" alt="preloader">
  </div>
  <!-- preloader end -->

<!-- header -->
<header class="fixed-top header">
  <!-- top header -->
  <div class="top-header py-2 bg-white">
    <div class="container">
      <div class="row no-gutters align-items-center"> <!-- Add align-items-center class -->
        <div class="col-lg-7 text-center text-lg-left">
          <strong>PHILIPPINE ASSOCIATION OF PHYSICS AND SCIENCE INSTRUCTORS</strong>
        </div>
    
        
      </div>
    </div>
  </div>
  
  
    <!-- navbar -->
    <div class="navigation w-100">
      <div class="container">
        <nav class="navbar navbar-expand-lg navbar-dark p-0 papsi-navbar">
          <a class="navbar-brand" href="index.html"><img src="https://papsitrainingcenter.weebly.com/uploads/2/5/9/7/25977880/papsilogo_1.png" alt="PAPSI Logo"></a>
          <button class="navbar-toggler rounded-0" type="button" data-toggle="collapse" data-target="#navigation"
            aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
  
          <div class="collapse navbar-collapse" id="navigation">
            <ul class="navbar-nav ml-auto text-center">
              <li class="nav-item">
                <a class="nav-link" href="index.html">Home</a>
              </li>
              <li class="nav-item @@about">
                <a class="nav-link" href="center.html">Training Center</a>
              </li>
              <li class="nav-item @@about">
                <a class="nav-link" href="portal.html">Member Portal</a>
              </li>
              <li class="nav-item @@about">
                <a class="nav-link" href="about.html">About</a>
              </li>
              <li class="nav-item @@about">
                <a class="nav-link" href="membership.html">Membership</a>
              </li>
              <li class="nav-item @@courses">
                <a class="nav-link" href="certificate.html">Certificate</a>
              </li>
              <li class="nav-item active">
                <a class="nav-link" href="verification.html">Verification</a>
              </li>
              <li class="nav-item @@contact">
                <a class="nav-link" href="contact.html">Contact</a>
              </li>
            </ul>
          </div>
        </nav>
      </div>
    </div>
  </header>
  <!-- /header -->
<!-- Modal -->
<div class="modal fade" id="signupModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content rounded-0 border-0 p-4">
            <div class="modal-header border-0">
                <h3>Register</h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="login">
                    <form action="#" class="row">
                        <div class="col-12">
                            <input type="text" class="form-control mb-3" id="signupPhone" name="signupPhone" placeholder="Phone">
                        </div>
                        <div class="col-12">
                            <input type="text" class="form-control mb-3" id="signupName" name="signupName" placeholder="Name">
                        </div>
                        <div class="col-12">
                            <input type="email" class="form-control mb-3" id="signupEmail" name="signupEmail" placeholder="Email">
                        </div>
                        <div class="col-12">
                            <input type="password" class="form-control mb-3" id="signupPassword" name="signupPassword" placeholder="Password">
                        </div>
                        <div class="col-12">
                            <button type="submit" class="btn btn-primary">SIGN UP</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Modal -->
<div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content rounded-0 border-0 p-4">
            <div class="modal-header border-0">
                <h3>Login</h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form action="#" class="row">
                    <div class="col-12">
                        <input type="text" class="form-control mb-3" id="loginPhone" name="loginPhone" placeholder="Phone">
                    </div>
                    <div class="col-12">
                        <input type="text" class="form-control mb-3" id="loginName" name="loginName" placeholder="Name">
                    </div>
                    <div class="col-12">
                        <input type="password" class="form-control mb-3" id="loginPassword" name="loginPassword" placeholder="Password">
                    </div>
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">LOGIN</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Membership Verification Modal -->
<div id="membershipVerifyModal" class="verify-modal hidden" role="dialog" aria-modal="true" aria-labelledby="membershipVerifyModalTitle">
  <div class="verify-modal-content">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h5 id="membershipVerifyModalTitle" class="mb-0">Verify Membership</h5>
      <button class="verify-modal-close" aria-label="Close" onclick="closeMembershipVerifyModal()">&times;</button>
    </div>
    <div class="form-group">
      <label for="membershipIdInput" class="font-weight-bold">Enter the PAPSI ID</label>
      <input id="membershipIdInput" type="text" class="form-control" placeholder="Enter your PAPSI ID" />
    </div>
    <div class="d-flex justify-content-end mb-3">
      <button class="btn btn-success mr-2" onclick="verifyMembership()">Verify</button>
      <button class="btn btn-secondary" onclick="closeMembershipVerifyModal()">Cancel</button>
    </div>
    <div id="membershipVerifyResult"></div>
  </div>
  
</div>

<!-- page title -->
<section class="page-title-section overlay" data-background="images/backgrounds/page-title.jpg">
  <div class="container">
    <div class="row">
      <div class="col-md-8">
        <ul class="list-inline custom-breadcrumb mb-2">
          <li class="list-inline-item"><a class="h2 text-primary font-secondary" href="about.html">PAPSI</a></li>
          <li class="list-inline-item text-white h3 font-secondary nasted">Verification</li>
        </ul>
    
      </div>
    </div>
  </div>
</section>
<!-- /page title -->

<!-- notice details -->
<section class="section">
  <div class="container mb-4"> <!-- Added margin-bottom (mb-4) class to create space between containers -->
    <div class="card border-0 rounded-0 hover-shadow">
      <div class="card-body">
        <h3 class="card-title">Certificate Verification</h3>
  
        <p>We understand the importance of ensuring the authenticity of your PAPSI certificate. To facilitate this verification process, we have created a simple and secure form. Please follow these steps to verify your certificate:</p>
  
        <ul>
          <li>1. Enter the unique verification code provided on your PAPSI certificate.</li>
          <li>2. Click verify. It will take a few seconds to verify the code.</li>
          <li>3. The verification result, which includes the participant's name and certificate title, will be shown below.</li>
        </ul>
        <p> </p>
  
        <p>Please note that the verification process is fully automated and executed by our secure computer server. To ensure accurate results, kindly double-check the information you enter before submitting the form.</p>
  
        <p>If you encounter any issues during the process or have further inquiries, feel free to contact our support team at <a href="mailto:papsi.seminar@gmail.com">papsi.seminar@gmail.com</a>. Thank you for your cooperation in maintaining the integrity of our certification process.</p>
  
        <button type="button" class="btn btn-primary" onclick="openVerifyModal()">Verify Certificate</button>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="card border-0 rounded-0 hover-shadow">
      <div class="card-body">
        <h3 class="card-title">Membership Verification</h3>
  
        <p>Welcome to the PAPSI Membership Verification Form! This secure and convenient tool is designed to verify your PAPSI membership status. To proceed, please provide your PAPSI ID, and we'll process your request in a few a seconds:</p>
  
        <ol>
          <li>1. Enter your PAPSI ID.</li>
          <li>2. Click verify, and we'll initiate the verification process.</li>
          <li>3. Upon successful verification, you will see the results below.</li>
        </ol>
        <p> </p>
  
        <p>The verification result will include the following details:</p>
        <ul>
          <li>A. Your Name</li>
          <li>B. PAPSI ID</li>
          <li>C. Expiration Date</li>
        </ul>
        <p> </p>
  
        <p>For your peace of mind, rest assured that the verification process is fully automated and carried out by our secure computer server. However, to receive an accurate result, please ensure the information you enter is correct before submitting the form.</p>
  
        <p>If you have any questions or encounter any issues during the process, please don't hesitate to contact our support team at <a href="mailto:papsi.seminar@gmail.com">papsi.seminar@gmail.com</a>. Thank you for being a valued member of PAPSI, and we appreciate your cooperation in using this verification service.</p>
        <button type="button" class="btn btn-primary" onclick="openMembershipVerifyModal()">Verify Membership</button>
      </div>
    </div>
  </div>
</section>

<!-- /notice details -->

  <!-- copyright -->
  <div class="copyright py-4 bg-footer">
    <div class="container">
      <div class="row">
        <div class="col-sm-7 text-sm-left text-center">
          <p class="mb-0">Copyright &copy;
            <script>
              var CurrentYear = new Date().getFullYear()
              document.write(CurrentYear)
            </script> 
            Developed for <a href="https://papsitraining.com/" class="text-muted">PAPSI</a>
          </p>
        </div>
        <div class="col-sm-5 text-sm-right text-center">
          <ul class="list-inline">
            <li class="list-inline-item"><a class="d-inline-block p-2" href="https://facebook.com/papsifbpage"><i class="ti-facebook text-primary"></i></a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</footer>
<!-- /footer -->

<!-- Certificate Verification Modal -->
<div id="verifyModal" class="verify-modal hidden" role="dialog" aria-modal="true" aria-labelledby="verifyModalTitle">
  <div class="verify-modal-content">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h5 id="verifyModalTitle" class="mb-0">Certificate Verification</h5>
      <button class="verify-modal-close" aria-label="Close" onclick="closeVerifyModal()">&times;</button>
    </div>
    <div class="form-group">
      <label for="verifyCodeInput" class="font-weight-bold">Enter verification code</label>
      <input id="verifyCodeInput" type="text" class="form-control" placeholder="Enter the certificate code here" />
    </div>
    <div class="d-flex justify-content-end mb-3">
      <button class="btn btn-success mr-2" onclick="verifyCertificate()">Verify</button>
      <button class="btn btn-secondary" onclick="closeVerifyModal()">Cancel</button>
    </div>
    <div id="verifyResult"></div>
  </div>
  
</div>

<!-- jQuery -->
<script src="plugins/jQuery/jquery.min.js"></script>
<!-- Bootstrap JS -->
<script src="plugins/bootstrap/bootstrap.min.js"></script>
<!-- slick slider -->
<script src="plugins/slick/slick.min.js"></script>
<!-- aos -->
<script src="plugins/aos/aos.js"></script>
<!-- venobox popup -->
<script src="plugins/venobox/venobox.min.js"></script>
<!-- filter -->
<script src="plugins/filterizr/jquery.filterizr.min.js"></script>
<!-- google map -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCcABaamniA6OL5YvYSpB3pFMNrXwXnLwU"></script>
<script src="plugins/google-map/gmap.js"></script>

<!-- Main Script -->
<script src="js/script.js"></script>

<script>
  function openVerifyModal(){
    var modal = document.getElementById('verifyModal');
    var input = document.getElementById('verifyCodeInput');
    var result = document.getElementById('verifyResult');
    if(result) result.innerHTML = '';
    modal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
    setTimeout(function(){ try { input && input.focus(); } catch(e){} }, 0);
  }
  function closeVerifyModal(){
    var modal = document.getElementById('verifyModal');
    modal.classList.add('hidden');
    document.body.style.overflow = 'auto';
  }
  // Close when clicking overlay
  (function(){
    var modal = document.getElementById('verifyModal');
    if(modal){
      modal.addEventListener('click', function(e){ if(e.target === modal) closeVerifyModal(); });
    }
  })();
  // Enter key submits
  document.addEventListener('DOMContentLoaded', function(){
    var input = document.getElementById('verifyCodeInput');
    if(input){
      input.addEventListener('keydown', function(ev){
        if(ev.key === 'Enter'){ ev.preventDefault(); verifyCertificate(); }
      });
    }
    var mid = document.getElementById('membershipIdInput');
    if(mid){
      mid.addEventListener('keydown', function(ev){
        if(ev.key === 'Enter'){ ev.preventDefault(); verifyMembership(); }
      });
    }
  });

  async function verifyCertificate(){
    var inputEl = document.getElementById('verifyCodeInput');
    var resultEl = document.getElementById('verifyResult');
    var code = (inputEl && inputEl.value || '').trim();
    if(!code){ resultEl.innerHTML = '<div class="text-danger">Please enter the certificate code.</div>'; return; }
    resultEl.innerHTML = '<div class="text-muted">Verifying… Please wait.</div>';

    var base = 'https://script.google.com/macros/s/AKfycbxSvBt7qG2fz4w_y9P2CoV7RfJq0kvThANuCWsVRjJz5NaiqqidhgmHQJZneydAt2Yk/exec';
    var params = new URLSearchParams({
      ID: '1ECREzocUMLr9HY9AoLSzNAJDRhtuBi3peuu8IDx2Daw',
      SH: 'Sheet1',
      func: 'verify',
      code: code
    });
    var url = base + '?' + params.toString();
    try{
      var res = await fetch(url, { method: 'GET' });
      var text = await res.text();
      try{
        var data = JSON.parse(text);
        var vCode = data.code || code;
        var vName = data.name || '';
        var vTraining = data.training || '';
        resultEl.innerHTML = '<div class="p-3 rounded" style="background:#edf7ed;border:1px solid #c6e6c6;color:#166938;font-size:1rem">\
          <div class="font-weight-bold">Certificate is valid</div>\
          <div class="mt-1">Code: <span class="font-weight-bold">'+ vCode +'</span></div>\
          <div class="mt-1">Name: <span class="font-weight-bold">'+ vName +'</span></div>\
          <div class="mt-1">Training: <span class="font-weight-bold">'+ vTraining +'</span></div>\
        </div>';
        return;
      } catch(_){
        var errMsg = (text || '').trim() || 'Verification failed.';
        resultEl.innerHTML = '<div class="p-3 rounded" style="background:#fdeaea;border:1px solid #f5c2c7;color:#842029;font-size:1rem">'+ errMsg +'</div>';
        return;
      }
    } catch(err){
      resultEl.innerHTML = '<div class="p-3 rounded" style="background:#fdeaea;border:1px solid #f5c2c7;color:#842029;font-size:1rem">'+ (err && err.message || 'Unable to verify at this time.') +'</div>';
    }
  }
</script>

<script>
  function formatLongDate(val){
    if(!val) return '';
    var s = String(val).trim();
    // Try native Date first (handles ISO and most mm/dd/yyyy)
    var d = new Date(s);
    if(!isNaN(d)){
      var months = ['January','February','March','April','May','June','July','August','September','October','November','December'];
      return months[d.getMonth()] + ' ' + d.getDate() + ', ' + d.getFullYear();
    }
    // Fallback: try simple mm/dd/yyyy or mm-dd-yyyy
    var m = s.match(/^(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2,4})$/);
    if(m){
      var mm = parseInt(m[1],10) - 1;
      var dd = parseInt(m[2],10);
      var yyyy = parseInt(m[3],10);
      if(yyyy < 100) yyyy = 2000 + yyyy; // basic century fix
      var d2 = new Date(yyyy, mm, dd);
      if(!isNaN(d2)){
        var months2 = ['January','February','March','April','May','June','July','August','September','October','November','December'];
        return months2[d2.getMonth()] + ' ' + d2.getDate() + ', ' + d2.getFullYear();
      }
    }
    return s; // if unparseable, show as-is
  }
  function openMembershipVerifyModal(){
    var modal = document.getElementById('membershipVerifyModal');
    var input = document.getElementById('membershipIdInput');
    var result = document.getElementById('membershipVerifyResult');
    if(result) result.innerHTML = '';
    modal.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
    setTimeout(function(){ try { input && input.focus(); } catch(e){} }, 0);
  }
  function closeMembershipVerifyModal(){
    var modal = document.getElementById('membershipVerifyModal');
    modal.classList.add('hidden');
    document.body.style.overflow = 'auto';
  }
  // Close when clicking overlay for membership modal
  (function(){
    var modal = document.getElementById('membershipVerifyModal');
    if(modal){
      modal.addEventListener('click', function(e){ if(e.target === modal) closeMembershipVerifyModal(); });
    }
  })();
  
  // Placeholder verification (UI)
  async function verifyMembership(){
    var inputEl = document.getElementById('membershipIdInput');
    var resultEl = document.getElementById('membershipVerifyResult');
    var id = (inputEl && inputEl.value || '').trim();
    if(!id){ resultEl.innerHTML = '<div class="text-danger">Please enter the PAPSI ID.</div>'; return; }
    resultEl.innerHTML = '<div class="text-muted">Verifying… Please wait.</div>';

    var base = 'https://script.google.com/macros/s/AKfycbydRAAaO83lKJpCpu7a48YlncAX9R5N1KvRx5LqMofd6Dd-O1S_Mnp9tGysVGFV7q6dZQ/exec';
    var params = new URLSearchParams({ SH: 'Sheet1', func: 'verify', id: id });
    var url = base + '?' + params.toString();
    try {
      var res = await fetch(url, { method: 'GET' });
      var text = await res.text();

      // Case 1 & 2: Known plain-text responses
      var trimmed = (text || '').trim();
      if (trimmed === 'Not yet a member' || trimmed === 'Error: Contact Admin') {
        resultEl.innerHTML = '<div class="p-3 rounded" style="background:#fdeaea;border:1px solid #f5c2c7;color:#842029;font-size:1rem">' + trimmed + '</div>';
        return;
      }

      // Case 3: JSON with { Name, ID, Date }
      try {
        var data = JSON.parse(text);
        var name = data.Name || data.name || '';
        var pid = data.ID || data.id || id;
        var date = formatLongDate(data.Date || data.date || '');
        resultEl.innerHTML = '<div class="p-3 rounded" style="background:#edf7ed;border:1px solid #c6e6c6;color:#166938;font-size:1rem">\
          <div class="font-weight-bold">Membership is valid</div>\
          <div class="mt-1">Name: <span class="font-weight-bold">' + name + '</span></div>\
          <div class="mt-1">PAPSI ID: <span class="font-weight-bold">' + pid + '</span></div>\
          <div class="mt-1">Expiration Date: <span class="font-weight-bold">' + date + '</span></div>\
        </div>';
        return;
      } catch(_) {
        // Unexpected response: show as error
        resultEl.innerHTML = '<div class="p-3 rounded" style="background:#fdeaea;border:1px solid #f5c2c7;color:#842029;font-size:1rem">' + (trimmed || 'Verification failed.') + '</div>';
        return;
      }
    } catch(err){
      resultEl.innerHTML = '<div class="p-3 rounded" style="background:#fdeaea;border:1px solid #f5c2c7;color:#842029;font-size:1rem">' + (err && err.message || 'Unable to verify at this time.') + '</div>';
    }
  }
</script>

</body>
</html>